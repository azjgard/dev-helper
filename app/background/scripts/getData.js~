
  function getDataForFrontend(data){
    //// VARIABLES
    let html           = parseString(data.htmlText, 'text/html'), 
        newSlideXml    = newXmlTemplate(data.slideMeta.slideType), 
        oldSlideXml    = getOldXml(), 
        oldXmlTextAll  = [],
        oldHtmlTextAll = [],
        newXmlObject   = '',
        specificHtml   = '',
        xmlFromHtml    = '';

    /// PARSE OLD XML
    if(oldSlideXml){
      newXmlObject = parseOldXml(data.slideMeta.slideType, oldSlideXml);
    }

    //// PARSE OLD HTML
    if(html){
      oldHtmlTextAll = getAllHtmlText(html); 
      specificHtml   = getSpecificHtmlText(html); 
      xmlFromHtml = getXmlFromHtml(specificHtml);
    }
    
    //ADD HTML, XML, AND NARRATION TO NEW XML STRING
    let xmlAndAllText = addAllTextToNewXml(newXmlObject, oldHtmlTextAll, xmlFromHtml, data.narrationText, newSlideXml);

    xmlDoc = null;

    //TODO - do we need to return data.slideId as well???
    return {
      xml          : xmlAndAllText.completedNewXml,
      text         : xmlAndAllText.allText,
      percentage   : data.slidePercent
    };
  }

module.export = getDataForFrontend;
